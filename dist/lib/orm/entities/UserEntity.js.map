{"version":3,"file":"UserEntity.js","sourceRoot":"","sources":["../../../../src/lib/orm/entities/UserEntity.ts"],"names":[],"mappings":";;;;AACA,kDAA+C;AAC/C,sCAAiD;AACjD,uCAAqC;AACrC,qCAAsH;AAGtH,IAAa,UAAU,GAAvB,MAAa,UAAW,SAAQ,oBAAU;IAE/B,EAAE,CAAU;IAGZ,OAAO,GAAG,CAAC,CAAC;IAGf,KAAK,GAAG,CAAC,CAAC;IAEN,QAAQ,CAAgB;IACxB,MAAM,CAAgB;IAEjC;QACC,KAAK,EAAE,CAAC;QACF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACvB,CAAC;IAGD,IAAY,MAAM;QACpB,OAAO,oBAAS,CAAC,OAAO,CAAC,yBAAW,CAAC,CAAC;IACvC,CAAC;IAGS,UAAU;QACb,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;IAChC,CAAC;IAIS,YAAY;QACrB,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,QAAQ,EAAE;YAC7D,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC;SACvB;QACD,IAAI,IAAI,CAAC,MAAM,KAAK,IAAI,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,MAAM,EAAE;YAC7D,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;SACzB;IACF,CAAC;IAGS,YAAY;QACf,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IAC1B,CAAC;CACD,CAAA;AA5CG;IADF,uBAAa,CAAC,SAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC;;sCAC/B;AAGnB;IADC,gBAAM,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAE,WAAW,EAAE,yBAAkB,EAAE,CAAC;;2CAChE;AAGtB;IADI,gBAAM,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,WAAW,EAAE,yBAAkB,EAAE,CAAC;;yCACnE;AAiBjB;IADC,mBAAS,EAAE;;;;4CAIX;AAID;IAFC,qBAAW,EAAE;IACb,qBAAW,EAAE;;;;8CAQb;AAGD;IADC,qBAAW,EAAE;;;;8CAIb;AA7CW,UAAU;IADtB,gBAAM,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC;;GACxB,UAAU,CA8CtB;AA9CY,gCAAU","sourcesContent":["/* eslint-disable @typescript-eslint/naming-convention */\nimport { PenguClient } from \"@lib/PenguClient\";\nimport { kBigIntTransformer } from \"@utils/util\";\nimport { container } from \"tsyringe\";\nimport { AfterInsert, AfterLoad, AfterRemove, AfterUpdate, BaseEntity, Column, Entity, PrimaryColumn } from \"typeorm\";\n\n@Entity(\"user\", { schema: \"public\" })\nexport class UserEntity extends BaseEntity {\n\t@PrimaryColumn(\"varchar\", { name: \"id\", length: 19 })\n    public id!: string;\n\n    @Column(\"bigint\", { name: \"balance\", default: 0, transformer: kBigIntTransformer })\n    public balance = 0;\n\n    @Column(\"bigint\", { name: \"vault\", default: 0, transformer: kBigIntTransformer })\n\tpublic vault = 0;\n\n    private _balance: number | null;\n    private _vault: number | null;\n\n\tpublic constructor() {\n\t\tsuper();\n        this._balance = null;\n        this._vault = null;\n    }\n\n    // @ts-expect-error 6133\n    private get client() {\n\t\treturn container.resolve(PenguClient);\n\t}\n\n\t@AfterLoad()\n\tprotected entityLoad() {\n        this._balance = this.balance;\n        this._vault = this.vault;\n\t}\n\n\t@AfterInsert()\n\t@AfterUpdate()\n\tprotected entityUpdate() {\n\t\tif (this._balance !== null && this.balance !== this._balance) {\n\t\t\tthis._balance = this.balance;\n        }\n        if (this._vault !== null && this.vault !== this._vault) {\n\t\t\tthis._vault = this.vault;\n\t\t}\n\t}\n\n\t@AfterRemove()\n\tprotected entityRemove() {\n        this._balance = null;\n        this._vault = null;\n\t}\n}\n"]}